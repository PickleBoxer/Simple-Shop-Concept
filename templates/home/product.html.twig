{% extends 'base.html.twig' %}

{% block title %}Product -
	{{ product }}
{% endblock %}

{% block body %}
	<div class="container">
		<div class="row mt-3 mb-4">
			<div class="col-md-4">
				<img src="{{ asset('/images/product/' ~ product.image) }}" alt="{{ product.name }}" class="img-fluid">
			</div>
			<div class="col-md-8">
				<h1 class="mt-4 mt-md-0">{{ product.name }}</h1>
				<h2>{{ product.price }}
					â‚¬</h2>
				<hr>
				<b>Description:
				</b>
				{{ product.description }}
				<form class="mt-4 p-4 bg-light" method="post">
					<div class="form-group">
						<label for="quantity">Quantity</label>
						<input type="number" class="form-control" id="quantity">
					</div>
					<button class="btn btn-warning">Add to Cart</button>
				</form>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row mt-3 mb-4">

	{% if comments|length > 0 %}
		<div>There are
			{{ comments|length }}
			comments.</div>

		{% for comment in comments %}

			{% if comment.photoFilename %}
				<img src="{{ asset('uploads/comments/photos/' ~ comment.photoFilename) }}"/>
			{% endif %}

			<h4>{{ comment.author }}</h4>
			<small>
				{{ comment.createdAt|format_datetime('medium', 'short') }}
			</small>

			<p>{{ comment.text }}</p>
		{% endfor %}

		{% if previous >= 0 %}
			<a href="{{ path('product', { id: product.id, offset: previous }) }}">Previous</a>
		{% endif %}
		{% if next < comments|length %}
			<a href="{{ path('product', { id: product.id, offset: next }) }}">Next</a>
		{% endif %}
	{% else %}
		<div>No comments for this product yet</div>
	{% endif %}

	<h2>Add your own feedback</h2>

	{# Displaying the form in the template can be done via the form Twig function #}
	{{ form(comment_form) }}
	
	</div>
	</div>
	{% endblock %}
